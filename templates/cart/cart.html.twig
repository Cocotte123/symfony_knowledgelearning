{% extends 'base.html.twig' %}

{% block title %}Panier{% endblock %}

{% block body %}
<main>
<section class="container mx-auto p-2 text-center" style="width: 80%;border:solid black 1px;margin-bottom:30px;">
    <h1>Bonjour {{ user.firstName }} {{ user.lastName}}</h1>
</section>
<section class="container">
    {% for article in cartContent %}
    <div class="mx-auto p-2" style="width: 90%;border:solid black 1px;margin-top:50px; margin-bottom:30px;">

            <div  class="row">
                <div class="col-md-4" style="align-content: center;">
                <label>Nom:</label>

                {% if article.repository == 'cursus' %}
                <div style="border:solid black 1px;text-align:center;">Cursus {{article.orderedLearning.level}} {{ article.orderedLearning.name }}</div>
                </div>
                {% else %}
                <div style="border:solid black 1px;text-align:center;">Leçon : {{ article.orderedLearning.name }}</div>
                </div>
                {% endif %}

                <div class="col-md-2" style="align-content: center;">
                <label>Prix:</label>
                <div style="border:solid black 1px;text-align:center;">{{article.orderedLearning.formattedPrice}}€</div>
                </div>
                <div class="col-md-2" style="align-content: center;">
                <label>Quantité :</label>
                <div style="border:solid black 1px;text-align:center;">{{article.orderedQuantity}}</div>
                </div>

                <div class="text-end">
                {% if article.repository == 'cursus' %}
                    <a href="{{path('app_cart_delete', {id:article.orderedLearning.id,repository:'cursus'})}}" class="btn" style="width: 200px;border:solid black 1px;">Retirer du panier</a>
                {% else %}
                    <a href="{{path('app_cart_delete', {id:article.orderedLearning.id,repository:'lesson'})}}" class="btn" style="width: 200px;border:solid black 1px;">Retirer du panier</a>
                {% endif %}
                </div>
            </div>
            
    </div>
    
    {% else %}
    <p class="text-center">Votre panier est vide</p>
    {% endfor %}
    <div class="row mx-auto p-2" style="width: 90%;justify-content:flex-end">
        <div  class="col col-md-3">
            <div style="width: 200px;border:solid black 1px;" class="text-center col-md-3">TOTAL : {{total|number_format(2, ',', ' ')}}€</div>
            
        </div>
        <div  class="col col-md-3">
            <div class="row">
            <a href="{{path('app_cart_pay')}}" class="btn" style="width: 200px;border:solid #DC143C 1px; background-color:#F08080;margin-bottom:10px;" class="col-md-3">Finaliser la commande</a>
            <a href="{{path('app_learning')}}" class="btn" style="width: 200px;border:solid #556B2F 1px;background-color:#8FBC8F;">Continuer mes achats</a>
            </div>
        </div>
    </div>
    
    </section>


</main>
{% endblock %}
